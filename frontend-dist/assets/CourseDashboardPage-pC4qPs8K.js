import{j as e,r as n,b as ce,a as de,u as me}from"./index-C-rJlfSu.js";import{u as pe,S as xe,E as ue}from"./database-BGJbst1D.js";import{s as P}from"./supabase-CEO_BhdU.js";function he({status:s}){if(!s)return e.jsx("div",{className:"w-full h-6 bg-gray-100 rounded",title:"Not started",children:e.jsx("div",{className:"w-0 h-full rounded"})});const j=()=>{switch(s.status){case"complete":return"bg-green-500";case"in_progress":return"bg-redi-teal";case"issues":return"bg-orange-500";default:return"bg-gray-300"}},o=()=>{switch(s.status){case"complete":return"bg-green-100";case"in_progress":return"bg-redi-teal/20";case"issues":return"bg-orange-100";default:return"bg-gray-100"}},u=s.totalCount>0?Math.round(s.scoredCount/s.totalCount*100):0,L=()=>{switch(s.status){case"complete":return e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})});case"issues":return e.jsx("svg",{className:"w-3 h-3 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"in_progress":return e.jsxs("span",{className:"text-xs font-medium text-redi-teal",children:[u,"%"]});default:return null}};return e.jsxs("div",{className:`relative w-full h-6 rounded overflow-hidden ${o()}`,title:`${s.scoredCount}/${s.totalCount} scored - ${s.status.replace("_"," ")}`,children:[e.jsx("div",{className:`h-full rounded transition-all duration-300 ${j()}`,style:{width:`${u}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:L()}),s.isQuickPassed&&e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-yellow-400 rounded-full",title:"Quick Passed"})]})}function ge({data:s,components:j,onParticipantClick:o,getEngagementEmoji:u}){const[L,b]=n.useState(null),W=t=>{const N=Object.keys(t);if(N.length===0)return"not_started";let _=!1,i=!1,h=!1,M=!0;for(const R of N){const E=t[R].status;E==="not_started"?(_=!0,M=!1):E==="in_progress"?(i=!0,M=!1):E==="issues"&&(h=!0)}return h&&M?"issues":M?"complete":i||_&&!M?"in_progress":"not_started"},d=t=>{switch(t){case"complete":return e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"issues":return e.jsx("svg",{className:"w-5 h-5 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"in_progress":return e.jsx("svg",{className:"w-5 h-5 text-redi-teal animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});default:return e.jsx("span",{className:"w-5 h-5 block rounded-full border-2 border-gray-300"})}},G=t=>{switch(t){case"TEAM_LEADER":return e.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium rounded bg-redi-navy/10 text-redi-navy",children:"TL"});case"TEAM_MEMBER":return e.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium rounded bg-redi-teal/10 text-redi-teal",children:"TM"});case"BOTH":return e.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium rounded bg-redi-sky/10 text-redi-sky",children:"Both"});default:return null}},D=t=>t.includes("Airway")?"Airway":t.includes("Electrical")?"Elec Tx":t.includes("CPR")?"CPR/AED":t.includes("Simulation")?"Int Sim":t.substring(0,10);return s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-redi-navy mb-2",children:"No participants found"}),e.jsx("p",{className:"text-gray-600",children:"No participants match the current filter criteria."})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden print:shadow-none print:border print:border-gray-300",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10",children:"Participant"}),j.map(t=>e.jsxs("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[80px]",children:[e.jsx("span",{className:"hidden lg:inline",children:t.component_name}),e.jsx("span",{className:"lg:hidden",children:D(t.component_name)})]},t.component_id)),e.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ðŸ˜Š"}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>{const N=W(t.componentStatuses),_=L===t.participant.participant_id;return e.jsxs(n.Fragment,{children:[e.jsxs("tr",{tabIndex:0,className:"hover:bg-gray-50 cursor-pointer transition-colors focus:outline-none focus:bg-redi-teal/5 focus:ring-2 focus:ring-inset focus:ring-redi-teal",onClick:()=>o(t.participant.participant_id),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),o(t.participant.participant_id))},children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap sticky left-0 bg-white z-10",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),b(_?null:t.participant.participant_id)},className:"p-1 hover:bg-gray-100 rounded transition-colors print:hidden",children:e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${_?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.participant.candidate_name}),G(t.participant.assessment_role)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.participant.payroll_number," â€¢ ",t.participant.designation]})]})]})}),j.map(i=>e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx(he,{status:t.componentStatuses[i.component_id]})},i.component_id)),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"text-xl",children:u(t.engagementScore)||"â€”"})}),e.jsx("td",{className:"px-3 py-3 text-center",children:d(N)})]}),_&&e.jsx("tr",{className:"bg-gray-50 print:hidden",children:e.jsx("td",{colSpan:j.length+3,className:"px-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[j.map(i=>{const h=t.componentStatuses[i.component_id];return h?e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:i.component_name}),e.jsxs("span",{className:"text-sm text-gray-500",children:[h.scoredCount,"/",h.totalCount," scored"]})]}),h.feedback&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',h.feedback,'"']}),h.isQuickPassed&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 mt-1",children:"Quick Passed"})]},i.component_id):null}),t.overallFeedback&&e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 md:col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Overall Feedback"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1 italic",children:['"',t.overallFeedback,'"']})]})]})})})]},t.participant.participant_id)})})]})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200 print:border-gray-300",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-green-500"})," Complete"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-redi-teal"})," In Progress"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-gray-300"})," Not Started"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full bg-orange-500"})," Issues"]})]})})]})}function fe({stats:s}){return e.jsx("div",{className:"bg-white border-b border-gray-200 print:border-none",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.completedAssessments,"/",s.totalAssessments," assessments"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-redi-teal h-2.5 rounded-full transition-all duration-300",style:{width:`${s.progressPercent}%`}})})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-redi-navy",children:[s.participantsComplete,"/",s.totalParticipants]}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Complete"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s.passRate,"%"]}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Pass Rate"})]}),s.participantsWithIssues>0&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-500",children:s.participantsWithIssues}),e.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Issues"})]})]})]})})})}function je({feedback:s}){const j=o=>new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 sticky top-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-redi-navy mb-4",children:"Feedback"}),e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),e.jsx("p",{children:"No feedback recorded yet"})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow sticky top-4 max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-redi-navy",children:["Feedback",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",s.length," entries)"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.map((o,u)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-redi-navy",children:o.participantName}),e.jsx("span",{className:"text-gray-500 mx-1",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-600",children:o.componentName})]}),e.jsx("span",{className:"text-xs text-gray-400",children:j(o.timestamp)})]}),e.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',o.feedback,'"']}),o.assessorName&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["â€” ",o.assessorName]})]},`${o.participantName}-${o.componentName}-${u}`))})]})}function _e(){const{courseId:s}=ce(),{assessor:j}=de(),o=me(),[u,L]=n.useState(null),[b,W]=n.useState([]),[d,G]=n.useState([]),[D,t]=n.useState({}),[N,_]=n.useState([]),[i,h]=n.useState([]),[M,R]=n.useState(!0),[E,F]=n.useState(""),[B,Y]=n.useState(!1),[O,Z]=n.useState("all"),[z,ee]=n.useState("name"),se=n.useMemo(()=>b.map(a=>a.participant_id),[b]),T=n.useCallback(async()=>{if(!(b.length===0||d.length===0))try{const a=b.map(r=>r.participant_id),[m,l]=await Promise.all([P.from("component_assessments").select("*, assessors(name)").in("participant_id",a),P.from("overall_assessments").select("*").in("participant_id",a)]),c=m.data||[],g=l.data||[],p=c.map(r=>r.assessment_id);let x=[];if(p.length>0){const{data:r}=await P.from("outcome_scores").select("*").in("assessment_id",p);x=r||[]}const f=new Map;for(const r of c){const w=f.get(r.participant_id)||[];w.push(r),f.set(r.participant_id,w)}const y=new Map;for(const r of g)y.set(r.participant_id,r);const v=new Map;for(const r of x){const w=v.get(r.assessment_id)||[];w.push(r),v.set(r.assessment_id,w)}const k=[],Q=[];for(const r of b){const w=f.get(r.participant_id)||[],I=y.get(r.participant_id),U={};for(const A of d){const C=w.find(S=>S.component_id===A.component_id),V=(D[A.component_id]||[]).filter(S=>S.applies_to==="BOTH"||S.applies_to===r.assessment_role||r.assessment_role==="BOTH").filter(S=>S.is_mandatory);let $=0,X=!1;if(C){const S=v.get(C.assessment_id)||[];for(const ie of V){const H=S.find(le=>le.outcome_id===ie.outcome_id);(H?.bondy_score||H?.binary_score)&&($++,(H.bondy_score==="MARGINAL"||H.bondy_score==="NOT_OBSERVED")&&(X=!0))}C.component_feedback&&Q.push({participantName:r.candidate_name,componentName:A.component_name,feedback:C.component_feedback,assessorName:C.assessors?.name||null,timestamp:C.last_modified_at})}let q="not_started";$>0&&($>=V.length?q=X?"issues":"complete":q="in_progress"),U[A.component_id]={componentId:A.component_id,status:q,scoredCount:$,totalCount:V.length,feedback:C?.component_feedback||null,isQuickPassed:C?.is_passed_quick||!1}}I?.overall_feedback&&Q.push({participantName:r.candidate_name,componentName:"Overall",feedback:I.overall_feedback,assessorName:null,timestamp:I.last_modified_at}),k.push({participant:r,componentStatuses:U,overallFeedback:I?.overall_feedback??null,engagementScore:I?.engagement_score??null})}_(k),h(Q.sort((r,w)=>new Date(w.timestamp).getTime()-new Date(r.timestamp).getTime()))}catch(a){console.error("Error loading assessment data:",a),F("Failed to load assessment data. Please try again.")}},[b,d,D]),{connectionStatus:te}=pe({courseId:s,participantIds:se,onAssessmentChange:T,onScoreChange:T});n.useEffect(()=>{s&&K()},[s]),n.useEffect(()=>{b.length>0&&d.length>0&&T()},[b,d,T]);const K=async()=>{R(!0),F("");try{const{data:a,error:m}=await P.from("courses").select("*").eq("course_id",s).single();if(m)throw m;L(a);const{data:l,error:c}=await P.from("participants").select("*").eq("course_id",s).order("candidate_name",{ascending:!0});if(c)throw c;W(l||[]);const{data:g,error:p}=await P.from("template_components").select("*").eq("template_id",a.template_id).order("component_order",{ascending:!0});if(p)throw p;G(g||[]);const x=(g||[]).map(y=>y.component_id),f={};if(x.length>0){const{data:y}=await P.from("template_outcomes").select("*").in("component_id",x).order("outcome_order",{ascending:!0});for(const v of y||[])f[v.component_id]||(f[v.component_id]=[]),f[v.component_id].push(v)}t(f)}catch(a){console.error("Error loading course data:",a),F("Failed to load dashboard. Please try again.")}finally{R(!1)}},ae=a=>{o(`/course/${s}/participant/${a}/assess`)},J=()=>{o("/courses")},re=n.useMemo(()=>{const a=N.length,m=d.length;let l=0;const c=a*m;let g=0,p=0;for(const x of N){let f=!0,y=!1;for(const v of d){const k=x.componentStatuses[v.component_id];(k?.status==="complete"||k?.status==="issues")&&l++,k?.status!=="complete"&&k?.status!=="issues"&&(f=!1),k?.status==="issues"&&(y=!0)}f&&g++,y&&p++}return{totalParticipants:a,totalComponents:m,completedAssessments:l,totalAssessments:c,participantsComplete:g,participantsWithIssues:p,progressPercent:c>0?Math.round(l/c*100):0,passRate:g>0?Math.round((g-p)/g*100):0}},[N,d]),ne=n.useMemo(()=>{let a=[...N];return O==="complete"?a=a.filter(m=>d.every(l=>{const c=m.componentStatuses[l.component_id];return c?.status==="complete"||c?.status==="issues"})):O==="incomplete"&&(a=a.filter(m=>d.some(l=>{const c=m.componentStatuses[l.component_id];return c?.status!=="complete"&&c?.status!=="issues"}))),z==="name"?a.sort((m,l)=>m.participant.candidate_name.localeCompare(l.participant.candidate_name)):z==="progress"&&a.sort((m,l)=>{const c=d.filter(p=>{const x=m.componentStatuses[p.component_id];return x?.status==="complete"||x?.status==="issues"}).length;return d.filter(p=>{const x=l.componentStatuses[p.component_id];return x?.status==="complete"||x?.status==="issues"}).length-c}),a},[N,O,z,d]),oe=a=>a&&ue.find(l=>l.value===a)?.emoji||null;return M?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",role:"status","aria-label":"Loading",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-redi-teal mx-auto","aria-hidden":"true"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})}):E?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-bold text-center text-redi-navy mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 text-center mb-4",children:E}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{F(""),K()},className:"flex-1 bg-redi-teal text-white py-2 px-4 rounded-lg hover:bg-redi-teal/90",children:"Retry"}),e.jsx("button",{onClick:J,className:"flex-1 bg-redi-coral text-white py-2 px-4 rounded-lg hover:bg-redi-coral-dark",children:"Go Back"})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 print:bg-white",children:[e.jsx("header",{className:"bg-white shadow-sm border-b-2 border-redi-coral print:shadow-none",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:J,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors print:hidden","aria-label":"Go back",children:e.jsx("svg",{className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-redi-navy",children:u?.course_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u?.course_date," â€¢ ",u?.course_coordinator]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 print:hidden",children:[e.jsx(xe,{status:te}),e.jsx("span",{className:"text-sm text-gray-600",children:j?.name}),e.jsx("button",{onClick:()=>window.print(),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Print dashboard",children:e.jsx("svg",{className:"h-5 w-5 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})]})]})})}),e.jsx(fe,{stats:re}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 print:hidden",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"filter-select",className:"text-sm text-gray-600",children:"Filter:"}),e.jsxs("select",{id:"filter-select",value:O,onChange:a=>Z(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-redi-teal",children:[e.jsx("option",{value:"all",children:"All Participants"}),e.jsx("option",{value:"incomplete",children:"Incomplete"}),e.jsx("option",{value:"complete",children:"Complete"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"sort-select",className:"text-sm text-gray-600",children:"Sort by:"}),e.jsxs("select",{id:"sort-select",value:z,onChange:a=>ee(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-redi-teal",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"progress",children:"Progress"})]})]}),e.jsxs("button",{onClick:()=>Y(!B),className:`flex items-center space-x-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${B?"bg-redi-teal/20 text-redi-teal":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),e.jsxs("span",{children:["Feedback (",i.length,")"]})]})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:e.jsxs("div",{className:`grid gap-6 ${B?"lg:grid-cols-3":"grid-cols-1"}`,children:[e.jsx("div",{className:B?"lg:col-span-2":"",children:e.jsx(ge,{data:ne,components:d,onParticipantClick:ae,getEngagementEmoji:oe})}),B&&e.jsx("div",{className:"lg:col-span-1",children:e.jsx(je,{feedback:i})})]})}),e.jsx("style",{children:`
        @media print {
          body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          .print\\:hidden { display: none !important; }
          .print\\:bg-white { background-color: white !important; }
          .print\\:shadow-none { box-shadow: none !important; }
        }
      `})]})}export{_e as default};
